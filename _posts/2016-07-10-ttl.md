---
layout: post
title:  "文字转语音练习"
date:   2016-07-10 23:06:05
categories: python
tags: TTL python
author: sqp
---

* content
{:toc}

# 文字转语音

文字直接转为语音播放出来是个我闲着没事搞出来的伪需求。  
思考一下实现思路大概是这样的：  
找个合适的语音引擎-> python调用引擎将文字转为mp3/wav格式 ->播放语音  

### 废话啥，开整吧
md，语音引擎好难啊。  
要不换种做法吧 - -！   
百毒翻译不是能朗读中文吗，哈哈，就你了。  

思路:调用百毒翻译的接口将文字转为mp3 -> 结束 :)

python源码  
```
#!/usr/bin/python
# -*- coding: UTF-8 -*-
__author__ = 'SQP'

def tts(str):
    try:
        import requests
    except:
        print u"请下载python-requests模块后使用..."
        exit(-1)
    import urllib

    s = requests.Session()
    s.get("http://tts.baidu.com/text2audio?lan=zh&pid=101&ie=UTF-8&text=" + urllib.quote(str))
    res = s.get("http://tts.baidu.com/text2audio?lan=zh&pid=101&ie=UTF-8&text=" + urllib.quote(str)).content
    f = open("tts-temp.mp3", "w")
    f.write(res)
    f.close()

def say():
    import os
    os.system("play tts-temp.mp3")

def over():
    import os
    os.system("rm tts-temp.mp3")

if __name__ == "__main__":
    import sys, locale

    length = len(sys.argv)

    if length<2:
        print u"请输入要转换的文字"
        exit(-1)

    str = sys.argv[1]

    times = 1
    try:
        if length>2:
            times = int(sys.argv[2])
    except:
        print u"第二个参数为朗读次数，请输入数字"


    tts(str)
    for i in range(0,times):
        say()
    over()

```

准备工作做一下吧  
1. 安装sox播放器  
``` 
$ sudo apt-get install sox
$ sudo apt-get install libsox-fmt-mp3
```
2. py源码安装到~tts/tts.py  
3. run  
```
$ python ~/tts/tts.py "你好" 
```

<br/><br/><br/><br/>
这也要写一篇博客,你是要多无聊??  
:(
